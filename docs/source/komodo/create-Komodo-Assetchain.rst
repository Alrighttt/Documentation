***********************
Creating New Assetchain
***********************

Requirements
============

* 2 Computers with the ability to open ports. (It's easier if they have static IP addresses or you are using a VPS)
* At least 4gb RAM each
* At least 2 CPU cores each
* 64-bit Linux Operating System (Ubuntu 16.04 recommended)
* ``komodod`` built on each, see :ref:`Installing Komodo Manually` (No need to download the Komodo blockchain)

Creating a new blockchain
=========================

Note:
-----

Do not include the ``<>`` characters in commands. If you are using windows, replace ``./komodod`` and ``./komodo-cli`` with ``komodod.exe`` and ``komodo-cli.exe`` for each step.

In the first node, change the working-directory to ``~/komodo/src/`` : ``cd ~/komodo/src``

Then execute the following command for running the first *daemon*

.. code-block:: shell

	./komodod -ac_name=EXAMPLECHAIN -ac_supply=1000000 -addnode=<IP address of the second node> &

Leave this running.

These are the simplest possible set of parameters. This will create a coin with the ticker symbol ``EXAMPLECHAIN`` with ``1000000`` premined coins.

.. note::

	EXAMPLECHAIN should be in capital letters and will be the ticker symbol that you intend to use in the future for trading coins generated by your asset chain (Example: Komodo's ticker is KMD)

.. note::
	
	-ac_supply determines the total supply of coins that your new asset chain will contain. This number should be entered as a whole number with no decimal places or commas.

.. warning::

	A maximum supply of 500 million is a good limit. This is to avoid 64 bit overflows.

Blocks will be on-demand after block 128 (i.e., the chain is only mined when a transaction is in the mempool) and the block reward will be ``.0001``.  Please refer to :ref:`Asset Chain Parameters` for a full list of parameters that can be used to customize your Blockchain.

After issuing this command, you will see the p2p port in the terminal window. 

.. code-block:: shell

	>>>>>>>>>> EXAMPLECHAIN: p2p.8096 rpc.8097 magic.c89a5b16 3365559062 1000000 coins

This p2p port must not be blocked by a firewall. If the computers do not have a public IP address, you will need to port-forward the p2p port and append the forwarded port to the IP. For example:

.. code-block:: shell

	./komodod -ac_name=EXAMPLECHAIN -ac_supply=1000000 -addnode=<IP of the second node>:8096


Connecting with the second node
===============================

On the second node, you now need to issue the same command, but with the first node's IP address along with setting ``-gen``.

In the second node, change the working-directory to ``~/komodo/src/`` : ``cd ~/komodo/src``

Then execute the following command for running the second *daemon*

.. code-block:: shell

	./komodod -ac_name=EXAMPLECHAIN -ac_supply=1000000 -addnode=<IP address of the first node> -gen

.. note::

	Notice that the IP address in -addnode points to the First Node

When this second node connects to the first node, the second node will begin to mine blocks. The premine will be mined in the genesis block to the wallet of the node that set ``-gen``.

You can check the contents of the wallet by executing the following command in another terminal:

.. code-block:: shell

	cd ~/komodo/src
	./komodod -ac_name=EXAMPLECHAIN getwalletinfo

More info can be found in the debug.log of the chain found at ``~/.komodo/EXAMPLECHAIN/debug.log`` or ``%appdata%\komodo\EXAMPLECHAIN\debug.log`` on windows.

Querying the Assetchain
=======================

You can query for assetchain blocks and balances with this komodo CLI command:

.. code-block:: shell

	./komodo-cli -ac_name=EXAMPLECHAIN getinfo

Use the ``help`` command for a list of commands:

.. code-block:: shell

	./komodo-cli -ac_name=EXAMPLECHAIN help

Secure this Assetchain with Delayed Proof of Work
=================================================

Your new chain can be secured via dPOW by the Komodo notary nodes giving it Bitcoin level security. The current rate for this is 300 KMD and 800 of the coin to be secured per year. If you are interested in having a new chain notarized, please contact @siu on the Komodo discord. 

.. [credit] 

	Document written by Alright based on previous guides by siu and PTYX. Please send any critiques to Alright on matrix, slack or discord.
